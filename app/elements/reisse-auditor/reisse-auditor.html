<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="./classifier-sandbox.html">
<link rel="import" href="./habitualizer-sandbox.html">
<link rel="import" href="./suggester-sandbox.html">

<dom-module id="reisse-auditor">
  <style> :host { display: block; } </style>
  <template>
    <h1> Suggesters Audition </h1>
    <template is="dom-repeat" items="{{suggesters}}" as="suggester">
      <paper-button on-tap="_audit" disabled="[[!ocurrences.length]]"> Audit [[_format(suggester)]] </paper-button>
      <suggester-sandbox name="{{suggester}}"></suggester-sandbox>
    </template>
    <h1> Classifiers Audition </h1>
    <template is="dom-repeat" items="{{classifiers}}" as="classifier">
      <paper-button on-tap="_audit" disabled="[[!ocurrences.length]]"> Audit [[_format(classifier)]] </paper-button>
      <classifier-sandbox name="{{classifier}}"></classifier-sandbox>
    </template>
    <h1> Habitualizers Audition </h1>
    <template is="dom-repeat" items="{{habitualizers}}" as="habitualizer">
      <paper-button on-tap="_audit" disabled="[[!ocurrences.length]]"> Audit [[_format(habitualizer)]] </paper-button>
      <habitualizer-sandbox name="{{habitualizer}}"></habitualizer-sandbox>
    </template>
  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'reisse-auditor',

      properties: {
        classifiers: Array,
        habitualizers: Array,
        ocurrences: Array
      },
      _audit (event) {
        if (!this.ocurrences || !this.ocurrences.length) {
          return console.warn(this.is, 'no ocurrences to perform on, aborting!');
        }
        Polymer.dom(event.target).nextElementSibling.perform(this.ocurrences);
      },
      _format: _.startCase
    });
  })();
  </script>
</dom-module>
